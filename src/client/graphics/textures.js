function Textures() {  
  this.height = 16;
  this.width = 16;
  this.data = {
    grass_top: [[0,1,1,2,1,1,3,1,2,1,2,1,1,2,1,2,1,2,0,1,3,0,2,1,0,1,1,0,0,1,3,1,1,1,1,2,1,2,1,1,3,2,1,2,2,1,1,0,0,2,0,1,1,1,0,0,1,1,0,2,1,3,3,1,1,1,1,3,3,1,0,2,1,2,2,1,0,1,3,3,2,1,1,0,1,0,3,1,2,1,2,1,2,1,1,1,1,0,2,1,1,2,3,1,0,3,0,1,3,1,3,1,0,2,3,0,2,1,1,2,1,2,1,2,1,2,1,0,1,3,1,1,1,3,1,0,2,1,1,0,1,3,0,1,1,3,1,2,1,1,2,1,1,3,0,1,2,0,1,0,1,0,3,1,2,0,1,3,2,1,2,2,1,1,1,1,2,1,1,1,2,3,2,0,1,0,2,1,0,2,3,2,1,1,2,0,1,2,1,0,2,1,2,3,2,1,2,1,1,3,1,3,1,0,1,2,1,2,1,1,3,0,2,1,0,2,1,1,2,2,1,0,2,1,3,1,1,2,1,1,1,1,2,0,1,1,2,1,2,0,3,1,0,1,1,3],[[54,86,41,255],[63,103,46,255],[72,118,53,255],[83,135,62,255]]],
    grass_side: [[0,1,1,2,1,1,0,3,1,1,0,1,0,1,1,2,0,3,1,1,0,3,1,2,1,2,0,0,1,2,0,1,0,2,0,2,0,2,4,1,0,3,0,2,1,3,0,2,1,2,0,3,4,2,4,2,0,4,1,2,1,2,1,2,1,4,0,2,4,4,4,2,0,4,1,3,4,4,1,4,4,5,4,4,4,5,4,4,1,4,4,4,4,5,4,4,6,6,5,5,5,7,6,4,4,5,6,6,8,5,5,8,8,6,6,5,6,6,6,5,5,8,8,8,5,5,4,4,5,5,4,4,6,6,6,7,5,5,4,4,5,6,7,4,5,6,7,4,5,8,6,6,6,6,4,5,6,6,7,5,8,6,6,6,5,8,8,6,6,8,5,8,8,6,6,5,8,8,6,6,4,5,8,8,5,5,4,4,8,8,5,5,5,6,6,8,4,4,5,5,5,8,8,4,4,4,5,6,5,6,6,4,4,4,5,7,4,4,8,4,4,5,5,4,5,5,4,4,6,4,8,6,7,4,5,5,6,6,7,4,5,8,6,4,5,5,6,6,6,5,5,8,6,6,6,5],[[54,86,41,255],[63,103,46,255],[72,118,53,255],[83,135,62,255],[74,55,43,255],[81,61,47,255],[117,87,68,255],[138,102,79,255],[106,79,61,255]]],
    dirt: [[0,1,2,3,3,4,0,0,0,3,4,0,0,0,0,3,3,2,2,4,3,3,4,0,0,3,2,4,4,2,2,3,3,4,0,0,1,3,4,4,3,2,2,2,2,2,1,3,3,4,0,0,0,3,3,3,3,4,1,2,2,4,0,0,3,4,0,0,4,3,4,3,4,0,0,0,3,4,0,0,3,3,4,4,2,2,3,3,4,0,0,1,0,3,4,0,0,3,2,2,2,1,0,3,4,0,0,0,4,3,3,4,4,2,2,2,0,0,0,2,2,4,4,4,3,3,2,2,3,3,2,3,0,0,0,1,2,2,3,3,3,0,1,2,3,0,1,3,3,4,0,0,0,0,3,3,0,0,1,3,4,0,0,0,3,4,4,0,0,4,3,4,4,0,0,3,4,4,0,0,2,3,4,4,3,3,2,2,4,4,3,3,3,0,0,4,2,2,3,3,3,4,4,2,2,2,3,0,3,0,0,2,2,2,3,1,2,2,4,2,2,3,3,2,3,3,2,2,0,2,4,0,1,2,3,3,0,0,1,2,3,4,0,2,3,3,0,0,0,3,3,4,0,0,0,3],[[117,87,68,255],[138,102,79,255],[74,55,43,255],[81,61,47,255],[106,79,61,255]]],
    stone: [[0,0,1,2,3,0,0,0,1,1,1,0,1,3,0,0,2,0,2,2,2,2,0,1,2,2,2,3,1,0,0,3,4,0,1,4,2,1,1,4,4,4,2,1,0,0,2,2,0,0,1,1,1,1,1,1,1,4,1,1,3,0,1,4,1,1,3,3,1,2,2,3,1,1,1,2,2,3,1,1,1,2,2,2,0,4,2,2,2,3,1,4,4,2,2,1,0,4,4,2,0,0,4,4,4,1,0,4,4,4,1,1,0,0,4,1,0,0,1,1,1,1,0,0,0,0,1,3,2,0,1,1,3,3,1,0,0,2,3,0,0,2,2,2,4,1,1,2,2,2,2,0,4,2,2,3,1,4,2,2,1,1,4,4,4,4,2,0,4,4,4,1,1,4,4,0,1,1,0,0,4,0,1,1,4,1,1,0,0,0,1,1,1,2,3,0,1,1,3,1,1,1,4,0,2,0,0,1,4,4,2,1,1,2,2,2,3,1,0,0,2,3,1,1,5,4,1,1,0,0,4,2,2,2,1,4,4,2,2,0,5,5,2,2,3,0,0,4,4,1,1,1,4,4,4,0],[[56,56,56,255],[62,62,62,255],[105,97,90,255],[120,110,102,255],[90,90,90,255],[57,57,57,255]]],
    leaves: [[0,1,2,2,1,3,4,2,3,5,5,0,2,5,3,4,3,2,5,5,2,3,2,2,3,3,0,0,2,2,0,3,2,5,5,5,2,3,3,3,2,2,1,1,3,0,0,3,1,1,2,2,3,2,2,3,2,4,4,2,2,3,2,2,3,3,3,3,3,2,4,3,2,4,4,4,2,3,2,5,5,3,3,3,3,2,4,3,1,4,4,4,4,2,3,3,4,0,1,1,2,3,0,0,3,2,4,4,5,2,3,0,0,0,1,4,4,3,0,4,5,3,2,4,5,4,1,0,3,3,2,4,5,2,3,4,4,3,1,4,4,4,2,3,3,2,4,4,5,4,2,3,3,3,1,1,2,2,2,3,3,2,4,5,5,4,2,3,2,3,0,0,3,0,0,3,3,2,4,5,5,4,1,0,0,3,3,3,3,0,2,2,3,2,4,4,4,4,1,0,0,2,1,1,3,3,4,5,0,0,2,2,2,1,3,3,3,2,4,4,2,2,3,3,0,0,3,3,0,0,2,2,3,2,4,4,4,4,1,3,3,5,4,3,3,3,5,2,3,1,4,5,5,4,1,3],[[40,91,34,255],[58,121,51,255],[58,129,50,255],[57,135,49,0],[60,137,52,255],[65,148,56,255]]],
    glass: [[0,0,1,1,1,1,1,1,1,0,0,0,1,1,2,2,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,0,3,3,3,2,3,3,3,3,3,3,3,3,3,3,2,0,3,3,2,3,3,3,3,3,3,3,3,3,3,3,1,4,3,2,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,1,1,1,2,2,2,2,2,1,1,1,1,1,0,0],[[214,255,246,255],[162,234,219,255],[131,232,211,255],[214,255,246,50],[229,255,249,255]]],
    white_glass: [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[[221,221,221,204],[222,222,222,77]]],
    red_glass: [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[[255,56,56,204],[255,56,56,77]]],
    green_glass: [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[[31,200,82,204],[30,199,83,77]]],
    blue_glass: [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[[57,42,255,204],[56,43,255,77]]],
    sand: [[0,0,0,1,0,0,0,2,0,0,0,0,0,0,2,3,0,0,3,0,0,4,2,0,5,1,1,0,2,2,3,3,0,5,1,0,4,4,2,3,5,1,0,4,2,3,5,1,0,1,2,4,2,0,3,3,1,0,4,4,0,5,1,2,0,0,4,2,0,3,5,1,0,0,4,2,5,1,2,4,0,2,0,5,5,1,1,1,0,4,2,1,0,2,4,4,4,0,5,5,1,1,2,0,0,0,0,0,0,2,4,2,0,0,1,1,1,2,2,0,3,1,1,0,0,4,2,0,0,1,0,0,2,0,3,3,5,1,0,0,2,5,0,2,0,0,4,0,0,3,5,1,1,0,2,0,5,1,2,4,2,4,2,0,5,1,1,1,0,2,0,5,3,1,2,0,4,4,0,5,5,1,1,0,4,0,5,3,1,1,0,0,2,0,0,5,1,0,2,4,4,0,1,1,1,0,0,5,0,0,1,1,0,0,4,2,5,1,0,0,2,2,5,1,0,2,4,2,0,2,2,5,1,0,0,4,2,1,1,0,3,2,2,0,0,0,1,1,0,0,4,2,0,0,0,2],[[217,190,119,255],[217,184,103,255],[220,195,127,255],[201,170,91,255],[228,202,133,255],[211,178,95,255]]],
    log_side: [[0,1,2,3,3,0,2,0,4,1,0,3,3,0,5,3,0,3,6,0,3,0,6,1,3,1,2,0,3,2,0,3,0,3,6,0,3,0,2,1,3,1,2,1,3,2,0,1,1,3,2,0,0,5,6,3,3,0,6,1,3,6,3,1,1,0,0,2,1,0,1,3,3,0,2,1,1,6,3,1,2,0,0,2,1,3,0,3,3,2,0,0,1,2,3,0,6,3,0,6,0,3,2,3,0,2,0,2,0,0,2,0,0,3,1,2,0,3,6,3,0,6,1,5,2,0,2,0,0,3,1,0,3,3,2,3,1,6,1,0,6,5,2,0,0,6,1,5,3,1,2,0,1,6,1,3,2,0,2,3,3,2,3,0,3,1,6,5,3,2,0,3,0,3,6,3,3,2,3,0,2,1,6,0,3,3,0,3,0,3,6,0,0,6,3,5,6,0,2,2,0,6,3,0,1,3,2,1,0,2,3,0,2,0,3,2,0,6,3,2,1,0,3,1,1,0,3,3,2,0,3,0,4,2,0,6,1,1,2,1,3,3,0,3,4,0,2,1,3,3,3,2,0,1,0,0],[[133,109,66,255],[124,103,64,255],[82,67,40,255],[115,94,58,255],[153,125,76,255],[143,117,71,255],[92,75,42,255]]],
    log_top: [[0,0,1,1,0,1,1,2,2,1,0,1,1,0,1,1,2,1,0,1,3,3,4,5,3,3,3,3,1,1,2,1,2,1,3,3,3,6,6,6,7,7,6,3,5,5,2,0,1,1,3,6,7,5,5,3,3,3,3,6,6,5,1,2,2,3,3,6,3,3,3,3,3,5,5,3,7,3,3,2,1,3,6,3,3,3,7,7,6,6,5,3,5,6,3,1,2,3,7,3,5,6,3,3,3,3,6,3,3,6,5,1,1,3,7,3,3,6,3,7,6,3,7,3,3,6,5,1,2,8,6,3,3,7,3,6,7,3,7,3,5,7,5,0,0,8,6,5,3,7,3,3,3,5,6,3,5,7,3,2,1,3,7,5,3,3,6,7,6,6,3,3,3,6,3,1,1,3,3,7,3,5,3,3,3,5,3,3,6,3,3,1,2,1,3,6,6,3,5,5,3,3,3,7,6,3,1,2,0,1,3,3,3,6,6,7,7,6,6,5,3,3,1,2,1,0,2,1,3,5,4,3,3,3,5,5,2,1,2,1,0,1,0,0,1,0,1,2,2,1,1,0,0,1,1,0],[[133,109,66,255],[115,94,58,255],[124,103,64,255],[167,140,88,255],[177,154,108,255],[172,147,98,255],[154,128,78,255],[145,119,70,255],[178,154,108,255]]],
    marble: [[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,2,2,2,0,0,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0,2,2,2,3,3,2,2,2,2,2,2,1,1,1,0,0,0,0,1,1,1,1,3,3,3,3,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,1,0,0,0,1,2,2,2,2,1,0,0,1,2,3,3,2,2,1,2,2,3,3,3,2,2,1,1,0,0,1,2,2,1,0,1,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,2,3,2,2,1,0,0,1,1,1,1,0,0,0,0,0,2,2,0,0,0,0,0,0,0],[[191,191,175,255],[185,185,170,255],[179,180,164,255],[174,174,155,255]]],
    tainted_marble: [[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,2,2,2,0,0,2,2,2,2,1,1,1,0,0,0,0,0,0,0,0,2,2,2,3,3,2,2,2,2,2,2,1,1,1,0,0,0,0,1,1,1,1,3,3,3,3,2,2,2,2,2,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,2,2,2,2,2,1,0,0,0,1,2,2,2,2,1,0,0,1,2,3,3,2,2,1,2,2,3,3,3,2,2,1,1,0,0,1,2,2,1,0,1,2,2,2,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,2,3,2,2,1,0,0,1,1,1,1,0,0,0,0,0,2,2,0,0,0,0,0,0,0],[[189,189,114,255],[185,185,110,255],[181,181,108,255],[176,176,103,255]]],
    jungle_marble: [[0,0,0,1,1,2,2,2,2,2,2,1,2,2,0,0,0,3,3,4,2,4,4,4,2,2,4,2,4,3,3,0,0,3,1,1,1,1,2,2,2,2,2,1,1,1,4,1,0,4,1,3,4,2,2,2,4,4,4,3,3,1,4,1,0,2,1,3,1,2,2,2,2,2,1,1,4,1,2,2,0,2,1,4,2,2,2,2,2,2,2,1,4,1,4,2,1,2,1,2,2,2,2,1,1,2,2,2,2,1,4,2,1,4,2,4,2,2,1,1,1,1,2,2,2,2,4,1,1,4,2,2,2,2,1,1,1,1,2,2,4,2,2,1,2,4,2,4,2,2,2,1,1,2,2,2,2,2,2,0,2,2,1,4,1,2,2,2,2,2,2,2,4,1,4,0,2,2,1,4,1,2,2,2,2,2,1,1,3,1,2,0,2,4,1,3,4,2,4,4,4,2,4,4,3,1,4,2,2,2,1,1,2,1,1,1,2,2,1,1,1,1,3,2,1,3,3,4,2,2,4,4,2,2,4,4,4,3,3,0,0,0,0,0,1,1,1,2,2,2,2,1,1,0,0,0],[[131,195,107,255],[125,187,102,255],[128,181,108,255],[115,168,95,255],[120,174,100,255]]]
  };
  this.textureIDs = [];
  this.textureKeys = {};
  this.textureKeyCount = 0;
  
  this.pixels = [];
};

Textures.prototype.load = function(texture) {
  let d = this.data[texture],
      pixels = d[0],
      colors = d[1];
  if (!d) return;
  this.textureIDs.push(texture);
  this.textureKeys[texture] = this.textureKeyCount ++;
  
  for (let p = 0; p < pixels.length; p ++) {
    this.pixels.push(...colors[pixels[p]]);
  }  
};

Textures.prototype.loadAll = function() {
  for (let d in this.data) {
    this.load(d);
  }
};

Textures.prototype.createTextureArray = function(gl) {
  const texture = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D_ARRAY, texture);
  
  gl.texImage3D(gl.TEXTURE_2D_ARRAY, 0, gl.RGBA, this.width, this.height, this.pixels.length / 256 / 4, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array(this.pixels));

  gl.generateMipmap(gl.TEXTURE_2D_ARRAY);
  gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.NEAREST_MIPMAP_LINEAR);  
  return texture;
};